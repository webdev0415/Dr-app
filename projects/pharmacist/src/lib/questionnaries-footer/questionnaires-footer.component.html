<ng-container [ngSwitch]="questionnaire">
  <ng-container *ngSwitchCase="PharmacyAssessmentsEnum.ASTHMA">
    <h6 class="py-2" [id]="prescriptionBlockId"><strong>Prescription Information</strong></h6>
    <div class="d-flex flex-column questionnaire-prescription-container w-100">
      <div class="ml-2 py-2">
        <span> Name: <input type="text" [ngModel]="(socialCard$ | async).patientFullName" />  Date of Birth: <input type="text" [ngModel]="(patientInformation$ | async)?.source.birthDate"/></span>
      </div>
      <span class="ml-2 pb-2"><i>Choose One (or generic equivalent):</i></span>
      <div class="d-flex flex-column ml-5 pb-2">
        <div class="pb-2">
          <input type="radio" class="mr-2 default-radio-button" [(ngModel)]="hfaPrescription" value="proAit" id="proAit" name="choose">
          <label class="text-nowrap" for="proAit">
            ProAit HFA 90mcg/actuation
          </label>
        </div>
        <div class="pb-2">
          <input type="radio" class="mr-2 default-radio-button" [(ngModel)]="hfaPrescription" value="ventolin" id="ventolin" name="choose">
          <label class="text-nowrap" for="ventolin">
            Ventolin HFA 90mcg/actuation
          </label>
        </div>
        <div class="pb-2">
          <input type="radio" class="mr-2 default-radio-button" [(ngModel)]="hfaPrescription" value="proventil" id="proventil" name="choose">
          <label class="text-nowrap" for="proventil">
            Proventil HFA 90mcg/actuation
          </label>
        </div>
      </div>
      <span class="ml-2 pb-2">Sig: Inhale 1-2 breaths every 4-6 hours as needed</span>
      <span class="ml-2 pb-2">Qty: 1 inhaler</span>
      <span class="ml-2 pb-2">Refills: 0</span>
      <span class="ml-2 pb-2">Prescriber: <input type="text" [ngModel]="practitionerName"/></span>
    </div>
  </ng-container>
  <ng-container *ngSwitchCase="PharmacyAssessmentsEnum['BIRTH-CONTROL']">
    <div class="d-flex flex-column questionnaire-prescription-container w-100 p-2">
      <div class="d-flex justify-content-center align-items-center">
        <label class="text-nowrap" for="new-patient">
          <input type="checkbox" class="mr-2" id="new-patient">
          New Patient
        </label>
        <label class="text-nowrap" for="established-patient">
          <input type="checkbox" class="mr-2" id="established-patient">
          Established Patient
        </label>
      </div>
      <div class="ml-1">
        <ng-container *ngTemplateOutlet="rxTable; context: {birthRefill: true}"></ng-container>
      </div>
      <div class="d-flex flex-row justify-content-between my-1 ml-1">
        <div class="left-container w-responsive">
          <label class="ml-0" for="prescriber">Prescriber:</label>
          <input id="_prescriber" class="w-responsive" type="text" [ngModel]="practitionerName" disabled/>
        </div>
        <div class="right-container w-responsive">
          <label for="icd-code" class="ml-0 text-nowrap">ICD-10 Code:</label>
          <input id="icd-code" class="w-responsive" type="text"/>
        </div>
      </div>
      <div class="w-100 birth-refill-table-container d-flex">
        <table class="w-70 birth-refill-table">
          <tr>
            <th class="text-center">Method Prescribed</th>
            <th class="text-center" colspan="2">
              <label for="physicianReferral-vertical" class="text-nowrap mx-0">
                <input id="physicianReferral-vertical" type="checkbox" class="mr-2"/>
                Physician Referral
              </label>
            </th>
            <th class="text-center" colspan="2">
              <label for="OCPs-vertical" class="text-nowrap mx-0">
                <input id="OCPs-vertical" type="checkbox" class="mr-2"/>
                OCPs
              </label>
            </th>
            <th class="text-center" colspan="2">
              <label for="patch-vertical" class="text-nowrap mx-0">
                <input id="patch-vertical" type="checkbox" class="mr-2"/>
                Patch
              </label>
            </th>
          </tr>
          <tr>
            <th class="text-center">Type of Patient</th>
            <th class="text-center">New</th>
            <th class="text-center">Established</th>
            <th class="text-center">New</th>
            <th class="text-center">Established</th>
            <th class="text-center">New</th>
            <th class="text-center">Established</th>
          </tr>
          <tr>
            <th class="text-center">ICD-10 Code</th>
            <th class="text-center">Z30.09 </th>
            <th class="text-center">Z30.09 </th>
            <th class="text-center">Z30.011 </th>
            <th class="text-center">Z30.41 </th>
            <th class="text-center">Z30.019 </th>
            <th class="text-center">Z30.40 </th>
          </tr>
        </table>
        <table class="w-30 birth-refill-table birth-refill-table-border">
          <tr>
            <th class="text-center" colspan="2">
              <label for="ring-vertical" class="text-nowrap mx-0">
                <input id="ring-vertical" type="checkbox" class="mr-2"/>
                Ring
              </label>
            </th>
            <th class="text-center" colspan="2">
              <label for="depo-injection-vertical" class="text-nowrap mx-0">
                <input id="depo-injection-vertical" type="checkbox" class="mr-2"/>
                Depo-injection
              </label>
            </th>
          </tr>
          <tr>
            <th class="text-center">New</th>
            <th class="text-center">Established</th>
            <th class="text-center">New</th>
            <th class="text-center">Established</th>
          </tr>
          <tr>
            <th class="text-center">Z30.013 </th>
            <th class="text-center">Z30.42 </th>
            <th class="text-center">Z30.019 </th>
            <th class="text-center">Z30.40 </th>
          </tr>
        </table>
      </div>
    </div>
  </ng-container>
  <ng-container *ngSwitchDefault>
    <div class="d-flex flex-column w-100 mt-2 prescription-information" [id]="prescriptionBlockId">
      <h6><strong>Prescription Information</strong></h6>
      <div class="d-flex flex-column questionnaire-prescription-container p-2">
        <div class="d-flex flex-row justify-content-between my-1">
          <div class="left-container w-responsive">
            <label class="ml-0" for="name">Patient Name:</label>
            <input id="name" class="w-responsive" type="text" [ngModel]="(socialCard$ | async).patientFullName"/>
          </div>
          <div class="right-container w-responsive">
            <label class="ml-0" for="dob">Patient DOB:</label>
            <input id="dob" type="text" class="w-responsive" [ngModel]="(patientInformation$ | async)?.source.birthDate | dob"/>
          </div>
        </div>
        <ng-container *ngTemplateOutlet="rxTable; context: {birthRefill: false}"></ng-container>
        <div class="d-flex flex-row justify-content-start my-1">
          <label class="ml-0" for="prescriber">Prescriber:</label>
          <input id="prescriber" class="w-100" type="text" [ngModel]="practitionerName" disabled/>
        </div>
        <div class="d-flex flex-row justify-content-start my-1">
          <label for="prescriber-address" class="ml-0 text-nowrap">Prescriber Address:</label>
          <input id="prescriber-address" class="w-100" type="text" [ngModel]="pharmacyAddres$ | async" disabled/>
        </div>
      </div>
    </div>
    <div class="mt-3 w-100 d-flex flex-column align-top" *ngIf="followUpTableShow">
      <h6><strong>Patient Follow-up (Due at 48 hours) </strong></h6>
      <table class="w-100 mt-2">
        <tr>
          <th class="text-left pl-2">Follow-up Call Attempt 1: _______ Follow-up Call Attempt 2: _______ Follow-up Call Attempt 3: ______</th>
          <th class="text-center">Yes</th>
          <th class="text-center">No</th>
        </tr>
        <tr>
          <th class="pl-2">Was the patient reached for follow up, as required, after being prescribed the medication? </th>
          <th class="text-left"></th>
          <th class="text-left"></th>
        </tr>
        <tr>
          <th class="pl-2">If yes, is the patient still experiencing symptoms?</th>
          <th class="text-left"></th>
          <th class="text-left"></th>
        </tr>
        <tr>
          <th class="pl-2" colspan="3">If yes, what symptoms? </th>
      </tr>
      <tr>
        <th class="pl-2" colspan="3">
            If yes, are the symptoms:
            <label class="text-nowrap">
              <input type="checkbox" class="mr-2" [disabled]="true" [checked]="false">
              Improving
            </label>
            <label class="text-nowrap">
              <input type="checkbox" class="mr-2" [disabled]="true" [checked]="false">
              Worsening
            </label>
            <label class="text-nowrap">
              <input type="checkbox" class="mr-2" [disabled]="true" [checked]="false">
              The same
            </label>
          </th>
        </tr>
        <tr>
          <th class="pl-2" colspan="3">If the patient is still experiencing symptoms, recommend that the patient be seen by a Primary Care Provider. </th>
        </tr>
        <tr>
          <th class="pl-2" colspan="3">Notes on Follow-up:</th>
        </tr>
      </table>
    </div>
    <div class="d-flex flex-row justify-content-start mt-4 w-100" *ngIf="showFaxedDate">
      <label for="faxed-date" class="ml-0">Date form faxed to provider:</label>
      <input id="faxed-date" type="text" disabled>
    </div>
    <div class="d-flex flex-column w-100" id="insurance-cards" *ngIf="(insuranceCard$ | async).length">
      <h3 class="mb-0">Insurance Card(s)</h3>
      <hr class="my-2">
      <div class="d-flex flex-column">
        <div class="d-flex flex-row mb-2 flex-wrap w-100" *ngFor="let card of (insuranceCard$ | async)">
          <img *ngFor="let image of card" [src]="isPlatformBrowser ? sanitizeImage(image.blob) : image.s3"/>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-container *ngTemplateOutlet="userSignature"></ng-container>
</ng-container>

<ng-template #rxTable let-birthRefill='birthRefill'>
  <ng-container *ngFor="let drug of drugInformation$ | async">
    <div class="d-flex flex-row justify-content-between my-1">
      <div class="left-container w-responsive">
        <label class="ml-0" for="prescription-name">{{birthRefill ? 'Rx': 'Prescription Name and Strength'}}:</label>
        <input id="prescription-name" class="w-responsive" type="text" [ngModel]="drug.drugName + ' ' + drug.strength"/>
      </div>
      <div class="right-container w-responsive">
        <label class="ml-0" for="rx-date">Rx Date:</label>
        <input id="rx-date" class="w-responsive" type="text" [ngModel]="date | dob"/>
      </div>
    </div>
    <div class="d-flex flex-row justify-content-between my-1">
      <div class="left-container w-responsive">
        <label class="ml-0" for="sig">SIG:</label>
        <input id="sig" class="w-responsive" type="text" [ngModel]="drug.directionsString"/>
      </div>
      <div class="right-container w-responsive" *ngIf="!birthRefill">
        <label class="ml-0" for="quantity">Quantity:</label>
        <input id="quantity" class="w-responsive" type="text" [ngModel]="drug.quantity"/>
      </div>
      <div class="right-container w-responsive" *ngIf="birthRefill">
        <label class="ml-0" for="quantity">Refills:</label>
        <input id="refills" class="w-responsive" type="text"/>
      </div>
    </div>
  </ng-container>
</ng-template>
